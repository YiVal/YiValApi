"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[249],{1277:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>s,default:()=>u,frontMatter:()=>i,metadata:()=>o,toc:()=>l});var r=t(5893),a=t(1151);const i={sidebar_position:9},s="Data Generation",o={id:"API-Reference/data-generation",title:"Data Generation",description:"BaseDataGenerator",source:"@site/docs/API-Reference/data-generation.md",sourceDirName:"API-Reference",slug:"/API-Reference/data-generation",permalink:"/YiValApi/docs/API-Reference/data-generation",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/API-Reference/data-generation.md",tags:[],version:"current",sidebarPosition:9,frontMatter:{sidebar_position:9},sidebar:"tutorialSidebar",previous:{title:"Logger",permalink:"/YiValApi/docs/API-Reference/logger"},next:{title:"Data Utils",permalink:"/YiValApi/docs/API-Reference/data-utils"}},d={},l=[{value:"<code>BaseDataGenerator</code>",id:"basedatagenerator",level:2},{value:"Introduction",id:"introduction",level:3},{value:"Class Definition",id:"class-definition",level:3},{value:"Description",id:"description",level:4},{value:"Attributes",id:"attributes",level:4},{value:"Example",id:"example",level:3},{value:"<code>OpenAIPromptDataGenerator</code>",id:"openaipromptdatagenerator",level:2},{value:"Introduction",id:"introduction-1",level:3},{value:"Class Definition",id:"class-definition-1",level:3},{value:"Description",id:"description-1",level:4},{value:"Attributes",id:"attributes-1",level:4},{value:"Example",id:"example-1",level:3},{value:"Generate Data and Save Test Case",id:"generate-data-and-save-test-case",level:4},{value:"Use OpenAI Prompt Data Generator in the YiVal config",id:"use-openai-prompt-data-generator-in-the-yival-config",level:4},{value:"Source Code",id:"source-code",level:3},{value:"Custom Data Generator Guide: <code>ListStringDataGenerator</code>",id:"custom-data-generator-guide-liststringdatagenerator",level:2},{value:"Introduction",id:"introduction-2",level:3},{value:"Subclassing the <code>BaseDataGenerator</code>",id:"subclassing-the-basedatagenerator",level:3},{value:"Providing a Configuration Class",id:"providing-a-configuration-class",level:3},{value:"Config",id:"config",level:3}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h1,{id:"data-generation",children:"Data Generation"}),"\n",(0,r.jsx)(n.h2,{id:"basedatagenerator",children:(0,r.jsx)(n.code,{children:"BaseDataGenerator"})}),"\n",(0,r.jsx)(n.h3,{id:"introduction",children:"Introduction"}),"\n",(0,r.jsx)(n.p,{children:"This class provides a blueprint for data generators and offers methods to register new generators, retrieve registered generators, and fetch their configurations."}),"\n",(0,r.jsx)(n.h3,{id:"class-definition",children:"Class Definition"}),"\n",(0,r.jsx)(n.h4,{id:"description",children:"Description"}),"\n",(0,r.jsx)(n.h4,{id:"attributes",children:"Attributes"}),"\n",(0,r.jsx)(n.h3,{id:"example",children:"Example"}),"\n",(0,r.jsx)(n.h2,{id:"openaipromptdatagenerator",children:(0,r.jsx)(n.code,{children:"OpenAIPromptDataGenerator"})}),"\n",(0,r.jsx)(n.h3,{id:"introduction-1",children:"Introduction"}),"\n",(0,r.jsx)(n.p,{children:"This module provides a mechanism for data generation using OpenAI's models. It aims to generate data examples programmatically based on a given prompt and configuration. The generated examples can be used for various purposes including testing, simulations, and more. The module offers utility functions to process and transform the generated data, ensuring it's structured and usable for subsequent operations."}),"\n",(0,r.jsx)(n.h3,{id:"class-definition-1",children:"Class Definition"}),"\n",(0,r.jsx)(n.h4,{id:"description-1",children:"Description"}),"\n",(0,r.jsxs)(n.p,{children:["This configuration object is specifically tailored for the ",(0,r.jsx)(n.code,{children:"OpenAIPromptDataGenerator"})," class. It provides settings to guide the generation of test cases using OpenAI models based on a given prompt."]}),"\n",(0,r.jsx)(n.h4,{id:"attributes-1",children:"Attributes"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"model_name(str)"})}),":","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Specifies the OpenAI model to be used for generating the test cases."}),"\n",(0,r.jsxs)(n.li,{children:["The default value is ",(0,r.jsx)(n.code,{children:'"gpt-4"'}),"."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"prompt (Union[str, List[Dict[str, str]]])"})}),":","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"The instruction or set of instructions given to the OpenAI model for generating test cases. It can be a single string or a list of messages."}),"\n",(0,r.jsxs)(n.li,{children:["The default value is  an empty string or ",(0,r.jsx)(n.code,{children:'""'}),"."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"input_function (Dict[str, Any])"})}),":","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Details of the function for which test cases are to be generated. Contains information like function name, description, and parameters."}),"\n",(0,r.jsxs)(n.li,{children:["The default value is an empty dictionary or ",(0,r.jsx)(n.code,{children:"{}"}),"."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"diversify(bool)"})}),":","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"A flag that determines if the generated test cases should be diversified to ensure comprehensive evaluation."}),"\n",(0,r.jsxs)(n.li,{children:["The default value is set to ",(0,r.jsx)(n.code,{children:"True"}),"."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"max_token(int)"})}),":","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Specifies the maximum number of tokens allowed for the prompt."}),"\n",(0,r.jsxs)(n.li,{children:["The default value is set to ",(0,r.jsx)(n.code,{children:"2000"}),"."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"expected_param_name(str)"})}),":","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Indicates the name of the parameter that contains expected values in the generated test cases."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"call_option(Optional[CallOption])"})}),":","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Provides additional options for calling the OpenAI model."}),"\n",(0,r.jsxs)(n.li,{children:["The default value is ",(0,r.jsx)(n.code,{children:"None"}),"."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"output_csv_path(Optional[str])"})}),":","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"The path to save the generated test cases in a CSV format."}),"\n",(0,r.jsxs)(n.li,{children:["The default value is ",(0,r.jsx)(n.code,{children:"None"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"example-1",children:"Example"}),"\n",(0,r.jsx)(n.h4,{id:"generate-data-and-save-test-case",children:"Generate Data and Save Test Case"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-Python",children:'# Create a configuration for data generation\r\ngenerator_config = OpenAIPromptBasedGeneratorConfig(\r\n    prompt="Please provide test cases for...",\r\n    input_function={\r\n        "name": "example_function",\r\n        "description": "Describe the function...",\r\n        "parameters": {\r\n            "param1": "str",\r\n            "param2": "int"\r\n        }\r\n    },\r\n    diversify=True,\r\n    max_token=1500,\r\n    expected_param_name="expected_output",\r\n    output_csv_path="path/to/save/test_cases.csv"\r\n)\r\n\r\n# Initialize the data generator with the configuration\r\ndata_generator = OpenAIPromptDataGenerator(generator_config)\r\n\r\n# Generate and save test cases\r\ndata_generator.generate_examples()\n'})}),"\n",(0,r.jsx)(n.h4,{id:"use-openai-prompt-data-generator-in-the-yival-config",children:"Use OpenAI Prompt Data Generator in the YiVal config"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-YAML",children:'dataset:\r\n  data_generators:\r\n    openai_prompt_data_generator:\r\n      chunk_size: 2\r\n      diversify: true\r\n      prompt:\r\n          "Please provide a concrete and realistic test case as a dictionary for function invocation using the ** operator.\r\n          Only include parameters, excluding description and name.\r\n          Ensure it\'s succinct and well-structured.\r\n          **Only provide the dictionary.**"\r\n      input_function:\r\n        description:\r\n          Given the species of an animal and its character, generate a corresponding story\r\n        name: animal_story_generation\r\n        parameters:\r\n          species: str\r\n          character: str\r\n          drawing_style: str\r\n      number_of_examples: 2\r\n      model_name: gpt-4\r\n      output_path: animal_story.pkl\r\n  source_type: machine_generated\n'})}),"\n",(0,r.jsx)(n.h3,{id:"source-code",children:(0,r.jsx)(n.a,{href:"https://github.com/YiVal/YiVal/blob/master/src/yival/data_generators/openai_prompt_data_generator.py",children:"Source Code"})}),"\n",(0,r.jsxs)(n.h2,{id:"custom-data-generator-guide-liststringdatagenerator",children:["Custom Data Generator Guide: ",(0,r.jsx)(n.code,{children:"ListStringDataGenerator"})]}),"\n",(0,r.jsxs)(n.p,{children:["This guide will walk you through creating a custom data generator using the provided ",(0,r.jsx)(n.code,{children:"BaseDataGenerator"}),"."]}),"\n",(0,r.jsx)(n.h3,{id:"introduction-2",children:"Introduction"}),"\n",(0,r.jsx)(n.p,{children:"The ability to programmatically generate data is crucial in scenarios where synthetic or mock data is required, such as in testing, simulations, and more. The provided foundational architecture for data generators allows flexibility and extensibility, enabling you to create custom data generators tailored to specific needs."}),"\n",(0,r.jsx)(n.p,{children:"In this guide, we will demonstrate how to create a custom data generator by extending the BaseDataGenerator. Our custom generator will output a list of predefined strings. By following this guide, you'll gain an understanding of the structure and process, enabling you to develop even more complex generators as needed."}),"\n",(0,r.jsxs)(n.h3,{id:"subclassing-the-basedatagenerator",children:["Subclassing the ",(0,r.jsx)(n.code,{children:"BaseDataGenerator"})]}),"\n",(0,r.jsxs)(n.p,{children:["First, create a ",(0,r.jsx)(n.code,{children:"ListStringDataGenerator"})," that simply outputs a list of strings as specified in its configuration."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-Python",children:"from typing import Iterator, List\r\n\r\nfrom list_string_data_generator_config import ListStringGeneratorConfig\r\nfrom yival.data_generators.base_data_generator import BaseDataGenerator\r\nfrom yival.schemas.common_structures import InputData\r\n\r\nclass ListStringDataGenerator(BaseDataGenerator):\r\n    def __init__(self, config: 'ListStringGeneratorConfig'):\r\n        super().__init__(config)\r\n\r\n    def generate_examples(self) -> Iterator[List[InputData]]:\r\n        for string_data in self.config.strings_to_generate:\r\n            yield [InputData(example_id=self.generate_example_id(string_data), content=string_data)]\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"providing-a-configuration-class",children:"Providing a Configuration Class"}),"\n",(0,r.jsx)(n.p,{children:"To specify the list of strings our generator should output, define a custom configuration class:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-Python",children:'from dataclasses import dataclass, field\r\nfrom typing import List\r\n\r\nfrom yival.schemas.data_generator_configs import BaseDataGeneratorConfig\r\n\r\n@dataclass\r\nclass ListStringGeneratorConfig(BaseDataGeneratorConfig):\r\n    """\r\n    Configuration for the ListStringDataGenerator.\r\n    """\r\n    strings_to_generate: List[str] = field(default_factory=list)\n'})}),"\n",(0,r.jsx)(n.h3,{id:"config",children:"Config"}),"\n",(0,r.jsx)(n.p,{children:"In your configuration (YAML), you can now specify the use of this data generator:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-YAML",children:"custom_data_generators:\r\n  list_string_data_generator:\r\n    class: /path/to/list_string_data_generator.ListStringDataGenerator\r\n    config_cls: /path/to/list_string_data_generator_config.ListStringGeneratorConfig\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-YAML",children:"dataset:\r\n  data_generators:\r\n    list_string_data_generator:\r\n      strings_to_generate:\r\n        - abc\r\n        - def\r\n  source_type: machine_generated\n"})})]})}function u(e={}){const{wrapper:n}={...(0,a.a)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},1151:(e,n,t)=>{t.d(n,{Z:()=>o,a:()=>s});var r=t(7294);const a={},i=r.createContext(a);function s(e){const n=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:s(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);